<script lang="ts">
	import { onMount } from 'svelte';
	import { fly } from 'svelte/transition';
	import gsap from 'gsap';
	import { ScrollToPlugin } from 'gsap/dist/ScrollToPlugin';

	import Introduction from './Introduction.svelte';

	onMount(() => {
		gsap.registerPlugin(ScrollToPlugin);
		ready = true;
	});

	let ready = false;
</script>

<div class="relative h-screen">
	<svg
		viewBox="-350 -350 800 800"
		xmlns="http://www.w3.org/2000/svg"
		class="w-full h-full absolute top-0 left-0 -z-10"
	>
		<circle cx="50" cy="35" r="80" class="fill-base-200">
			<animate
				attributeName="r"
				begin="0s"
				dur="1s"
				fill="freeze"
				values="10%; 10%; 10%; 10%; 10%; 10%; 10%; 10%; 10%; 10%; 20%; 40%; 60%; 80%; 100%; 120%; 200%; 500%; 1000%"
			/>
		</circle>

		<g
			stroke-linecap="round"
			fill="none"
			stroke-miterlimit="10"
			class="animate-write-fade stroke-base-content"
			stroke-width="2"
		>
			<path
				d="M 66.9 72.1 Q 66.6 72.1 66.3 72.05 Q 66 72 65.7 71.9 A 8.442 8.442 0 0 1 62.789 70.35 A 7.867 7.867 0 0 1 60.7 67.6 A 15.134 15.134 0 0 1 59.552 63.954 Q 59.244 62.314 59.205 60.44 A 26.302 26.302 0 0 1 59.2 59.9 Q 59.2 55.2 60.5 49.5 A 103.313 103.313 0 0 1 63.141 40.072 A 116.016 116.016 0 0 1 63.9 37.85 Q 66 31.9 68.35 26.45 Q 70.7 21 72.9 16.65 Q 74.778 12.937 76.146 10.572 A 55.778 55.778 0 0 1 76.6 9.8 Q 75 11.2 71.8 14.35 Q 69.05 17.057 65.783 20.613 A 252.718 252.718 0 0 0 64.7 21.8 Q 60.8 26.1 57.3 31 A 58.196 58.196 0 0 0 53.102 37.785 A 50.438 50.438 0 0 0 51.6 40.9 A 47.293 47.293 0 0 0 51.319 41.653 Q 50.85 42.937 50.1 45.15 A 57.096 57.096 0 0 0 48.843 49.419 A 67.483 67.483 0 0 0 48.35 51.5 A 36.58 36.58 0 0 0 47.864 54.13 Q 47.674 55.443 47.621 56.609 A 19.467 19.467 0 0 0 47.6 57.5 A 10.748 10.748 0 0 0 47.659 58.662 Q 47.788 59.844 48.2 60.6 A 0.319 0.319 0 0 0 48.205 60.656 Q 48.21 60.687 48.222 60.711 A 0.148 0.148 0 0 0 48.25 60.75 Q 48.291 60.791 48.299 60.867 A 0.352 0.352 0 0 1 48.3 60.9 A 0.737 0.737 0 0 1 47.889 61.557 Q 47.306 61.9 45.9 61.9 A 12.004 12.004 0 0 1 43.545 61.685 Q 42.218 61.42 41.221 60.824 A 5.515 5.515 0 0 1 39.45 59.15 A 10.32 10.32 0 0 1 38.006 55.791 Q 37.676 54.43 37.614 52.844 A 19.065 19.065 0 0 1 37.6 52.1 Q 37.6 47.697 39.053 42.288 A 58.136 58.136 0 0 1 39.55 40.55 Q 41.5 34.1 44 28.2 Q 45.4 24.9 47.2 21.45 Q 49 18 50.55 15.25 Q 51.977 12.718 52.684 11.584 A 23.717 23.717 0 0 1 52.8 11.4 A 105.351 105.351 0 0 0 50.28 13.765 Q 48.081 15.894 45.55 18.55 A 131.448 131.448 0 0 0 40.468 24.214 A 156.024 156.024 0 0 0 37.4 27.95 Q 33.3 33.1 29.8 38.55 A 66.279 66.279 0 0 0 25.972 45.323 A 55.456 55.456 0 0 0 24.2 49.35 Q 22.1 54.7 22.1 59.4 Q 22.1 61.221 22.854 62.425 A 4.104 4.104 0 0 0 23.2 62.9 L 23.4 63.3 A 0.19 0.19 0 0 1 23.296 63.462 Q 23.121 63.573 22.652 63.595 A 5.404 5.404 0 0 1 22.4 63.6 A 22.135 22.135 0 0 1 19.838 63.462 Q 16.811 63.108 15.05 61.85 A 5.522 5.522 0 0 1 12.959 58.833 Q 12.673 57.875 12.615 56.708 A 12.234 12.234 0 0 1 12.6 56.1 Q 12.6 55.6 12.65 55.1 Q 12.7 54.6 12.8 54 Q 13.071 51.742 14.036 48.137 A 92.111 92.111 0 0 1 14.25 47.35 Q 15.4 43.2 17.35 38.05 Q 19.3 32.9 21.85 27.45 Q 24.4 22 27.4 17 A 9.19 9.19 0 0 1 27.546 16.767 Q 27.92 16.185 28.875 14.808 A 239.234 239.234 0 0 1 28.95 14.7 Q 30.2 12.9 31.35 10.9 A 18.613 18.613 0 0 0 31.826 10.023 Q 32.475 8.739 32.499 8.053 A 1.486 1.486 0 0 0 32.5 8 A 0.959 0.959 0 0 0 32.475 7.768 Q 32.336 7.214 31.437 7.546 A 3.632 3.632 0 0 0 31.3 7.6 A 7.741 7.741 0 0 0 30.09 8.161 Q 28.911 8.825 27.502 10.026 A 27.211 27.211 0 0 0 27.3 10.2 Q 25 12.2 22.3 14.8 Q 19.6 17.4 16.65 19.85 Q 13.7 22.3 10.65 23.95 A 14.667 14.667 0 0 1 7.87 25.121 A 11.048 11.048 0 0 1 4.7 25.6 A 10.734 10.734 0 0 1 3.529 25.534 A 12.093 12.093 0 0 1 3.25 25.5 A 6.685 6.685 0 0 1 2.207 25.272 A 8.063 8.063 0 0 1 1.7 25.1 A 2.356 2.356 0 0 1 0.167 23.426 Q 0.031 22.959 0.006 22.375 A 6.343 6.343 0 0 1 0 22.1 Q 0 20.429 0.713 18.309 A 22.103 22.103 0 0 1 1.35 16.65 Q 2.7 13.5 4.7 10.6 A 3.64 3.64 0 0 1 5.176 9.986 A 2.687 2.687 0 0 1 5.9 9.45 Q 6.48 9.16 6.853 9.11 A 1.111 1.111 0 0 1 7 9.1 A 1.33 1.33 0 0 1 7.302 9.131 Q 7.714 9.227 7.785 9.622 A 1.002 1.002 0 0 1 7.8 9.8 Q 7.8 10.054 7.585 10.451 A 3.862 3.862 0 0 1 7.5 10.6 A 4.01 4.01 0 0 1 7.389 10.97 A 2.938 2.938 0 0 1 7.25 11.3 A 2.032 2.032 0 0 0 7.174 11.469 Q 7.1 11.659 7.1 11.8 A 1.063 1.063 0 0 0 7.174 12.209 Q 7.328 12.582 7.8 12.75 A 4.361 4.361 0 0 0 9.102 12.996 A 5.005 5.005 0 0 0 9.3 13 A 8.419 8.419 0 0 0 10.739 12.863 Q 12.22 12.605 14.155 11.858 A 31.558 31.558 0 0 0 14.8 11.6 Q 18.2 10.2 22.15 8.15 Q 26.1 6.1 30.05 4.1 A 66.155 66.155 0 0 1 33.848 2.319 A 48.275 48.275 0 0 1 37.4 0.95 Q 40.8 -0.2 43 0.2 Q 44.439 0.538 45.626 2.023 A 8.822 8.822 0 0 1 46.05 2.6 Q 46.936 3.912 47.413 5.01 A 7.781 7.781 0 0 1 47.8 6.1 A 0.786 0.786 0 0 1 47.836 6.28 Q 47.89 6.892 47.2 8.1 Q 46.4 9.5 45.15 11.2 Q 43.9 12.9 42.7 14.4 Q 41.5 15.9 40.9 16.7 Q 40.006 17.8 38.923 19.231 A 151.463 151.463 0 0 0 37.9 20.6 Q 36.2 22.9 34.55 25.15 Q 32.9 27.4 31.9 28.9 Q 31.346 29.823 31.346 30.448 A 1.331 1.331 0 0 0 31.35 30.55 A 1.47 1.47 0 0 0 31.364 30.673 Q 31.439 31.132 31.776 30.729 A 1.7 1.7 0 0 0 31.8 30.7 Q 34 27.8 37.05 24.05 Q 40.1 20.3 43.25 16.55 A 210.798 210.798 0 0 1 46.093 13.232 Q 47.642 11.464 49.05 9.95 Q 51.048 7.801 52.335 6.704 A 11.545 11.545 0 0 1 53.1 6.1 Q 53.6 5.7 54.95 5.05 A 6.279 6.279 0 0 1 56.514 4.548 Q 57.295 4.4 58.2 4.4 Q 59.3 4.4 60.4 4.7 Q 61.34 4.956 62.427 5.578 A 13.645 13.645 0 0 1 62.8 5.8 A 4.539 4.539 0 0 1 64.16 7.054 Q 64.796 7.966 64.885 9.191 A 5.614 5.614 0 0 1 64.9 9.6 A 8.866 8.866 0 0 1 64.574 11.864 Q 63.895 14.421 61.8 17.8 A 584.6 584.6 0 0 1 58.877 22.462 Q 57.366 24.848 55.659 27.502 A 1036.28 1036.28 0 0 1 54.5 29.3 Q 55.875 27.512 57.699 25.323 A 212.507 212.507 0 0 1 59.45 23.25 A 1046.758 1046.758 0 0 0 63.988 17.906 A 1171.933 1171.933 0 0 0 65.55 16.05 Q 68.7 12.3 71.55 9.05 Q 74.4 5.8 76.35 3.65 A 139.21 139.21 0 0 1 77.027 2.909 Q 78.375 1.444 78.7 1.2 Q 80.031 0.261 80.932 0.057 A 2.125 2.125 0 0 1 81.4 0 A 3.199 3.199 0 0 1 82.042 0.07 Q 82.363 0.136 82.721 0.264 A 7.475 7.475 0 0 1 83.3 0.5 Q 84.284 0.947 85.748 1.715 A 95.779 95.779 0 0 1 86.1 1.9 Q 88.3 3 89.2 4.65 A 7.44 7.44 0 0 1 90.096 8.051 A 8.747 8.747 0 0 1 90.1 8.3 A 14.093 14.093 0 0 1 89.453 12.447 A 17.751 17.751 0 0 1 88.7 14.45 Q 87.393 17.391 86.173 19.678 A 56.759 56.759 0 0 1 86 20 Q 85.079 21.566 83.353 25.166 A 222.757 222.757 0 0 0 83.05 25.8 Q 81.1 29.9 78.8 35.3 Q 76.5 40.7 74.35 46.5 Q 72.2 52.3 70.8 57.55 A 51.253 51.253 0 0 0 69.975 61.123 Q 69.4 64.13 69.4 66.5 A 14.847 14.847 0 0 0 69.463 67.899 A 11.835 11.835 0 0 0 69.6 68.9 Q 69.8 70 70.3 70.8 A 4.376 4.376 0 0 1 67.72 72.046 A 6.071 6.071 0 0 1 66.9 72.1 Z"
			/>
		</g>
	</svg>

	{#if ready}
		<div
			transition:fly={{
				delay: 1_100,
				duration: 1_000,
				x: -40,
			}}
		>
			<Introduction />
		</div>
	{/if}

	<div class="absolute bottom-8 left-0 right-0 grid place-items-center">
		<button
			on:click={() =>
				gsap.to(window, {
					duration: 0.7,
					scrollTo: '#projects',
					ease: 'power2.inOut',
				})}
			class="hover:translate-y-1 transition-all duration-300 relative"
		>
			<svg class="w-10 h-10 fill-base-content" viewBox="0 0 24 24">
				<path d="M18 6.41 16.59 5 12 9.58 7.41 5 6 6.41l6 6z" />
				<path d="m18 13-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z" />
			</svg>
		</button>

		{#if ready}
			<div
				class="absolute -translate-y-16 fill-primary h-16 w-16 hidden md:block"
			>
				<span
					class="text-primary absolute translate-x-20 -translate-y-4 w-64 text-xl font-into-light"
					transition:fly={{
						delay: 1_500,
						duration: 1_000,
						x: 5,
					}}>Check out my projects!</span
				>

				<svg
					viewBox="75.37 92.417 291.836 236.207"
					xmlns="http://www.w3.org/2000/svg"
					transition:fly={{
						delay: 1_500,
						duration: 1_000,
						y: -5,
					}}
				>
					<path
						d="M 235.9 77.333 C 237.59 77.545 238.223 77.333 238.857 77.545 C 277.497 100.815 303.679 133.817 313.603 178.242 C 316.137 189.454 315.715 201.09 312.759 212.513 C 306.635 237.053 286.154 253.977 261.027 255.458 C 247.936 256.304 235.267 254.823 223.865 247.63 C 223.02 241.496 222.387 235.361 221.12 229.649 C 219.009 220.341 214.152 212.725 205.495 208.071 C 199.16 204.474 192.826 204.474 189.448 207.859 C 185.013 212.302 185.014 218.225 187.758 223.091 C 191.559 229.86 196.204 236.207 201.061 242.13 C 204.228 245.938 208.451 249.111 212.252 252.285 C 208.662 276.19 186.069 286.344 159.042 276.401 C 158.198 273.016 157.353 269.42 156.298 266.035 C 152.075 253.554 144.262 244.034 131.593 239.592 C 126.737 237.899 121.458 237.265 117.235 241.707 C 114.068 245.092 114.068 251.015 117.446 256.939 C 122.936 266.247 131.171 272.805 140.039 278.517 C 143.206 280.421 146.374 282.325 149.541 284.017 C 145.318 321.038 112.167 347.27 79.65 332.462 C 79.862 335.212 79.65 337.539 80.495 338.808 C 81.551 340.289 83.873 341.135 85.774 341.558 C 103.721 344.943 120.402 342.828 134.127 329.712 C 144.473 319.98 151.441 308.134 156.086 294.594 C 156.72 292.691 157.353 290.787 158.198 288.883 C 158.198 288.671 158.62 288.46 159.465 287.825 C 161.365 288.036 163.688 288.036 166.01 288.46 C 194.304 292.902 209.084 285.286 222.176 258.843 C 224.71 259.689 227.666 260.535 230.411 261.593 C 246.669 267.093 262.928 267.516 279.397 262.016 C 306.213 253.131 323.527 230.072 325.428 200.878 C 326.483 185.012 323.739 169.78 318.038 154.972 C 304.102 119.22 281.298 91.084 247.091 72.679 C 245.402 71.621 243.502 70.775 241.813 69.717 C 241.601 69.506 241.39 69.083 240.757 67.813 C 247.936 66.121 254.693 66.756 261.45 67.179 C 267.995 67.39 274.752 68.025 281.931 68.448 C 281.298 62.948 278.341 60.832 274.752 59.563 C 270.529 58.294 266.306 56.601 262.083 56.39 C 250.681 55.966 239.068 55.755 227.454 56.39 C 218.375 57.024 215.841 61.89 219.853 69.294 C 228.51 84.949 237.378 100.603 246.247 116.258 C 247.725 118.797 249.625 120.912 251.948 123.874 C 255.96 119.22 254.27 115.835 252.792 112.662 C 246.88 101.238 241.601 89.814 235.9 77.333 Z M 123.569 248.054 C 138.139 249.958 147.218 259.266 147.852 272.382 C 138.139 266.035 128.848 260.323 123.569 248.054 Z M 194.938 215.263 C 207.395 218.225 213.308 226.687 212.041 239.592 C 204.017 232.822 197.049 226.475 194.938 215.263 Z"
						style="transform-origin: 202.65px 199.489px;"
						transform="matrix(-0.940476119518, -0.339859068394, 0.339859068394, -0.940476119518, 0.000062560393, 0.000003741725)"
					/>
				</svg>
			</div>
		{/if}
	</div>
</div>

<style>
	.animate-write-fade {
		animation:
			write-fill 1.2s linear forwards,
			shift-fade 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
		stroke-dasharray: 1000;
		stroke-dashoffset: 1000;
		animation-delay: 0s, 1.2s;
	}

	@keyframes write-fill {
		0% {
			fill: none;
		}

		60% {
			@apply fill-base-200;
			stroke-dashoffset: 0;
		}

		100% {
			@apply fill-base-content;
			stroke-dashoffset: 0;
		}
	}

	@keyframes shift-fade {
		0% {
			transform: translateX(0);
			@apply opacity-100;
		}

		100% {
			transform: translateX(-8%);
			@apply opacity-0;
		}
	}
</style>
